<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Can standardize selected
variables in a lavaan model without
refitting the models, can handle
product term correctly and skip
categorical predictors in
standardization."><title>Standardize Coefficients in a 'lavaan'-Model — lav_betaselect • betaselectr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/PT_Serif-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Standardize Coefficients in a 'lavaan'-Model — lav_betaselect"><meta property="og:description" content="Can standardize selected
variables in a lavaan model without
refitting the models, can handle
product term correctly and skip
categorical predictors in
standardization."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><meta name="google-site-verification" content="0VLBmFnW_UJFI-7gXnORPBsWxqZwmzuGpK-TeVRLBjQ"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">betaselectr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sfcheung/betaselectr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Standardize Coefficients in a 'lavaan'-Model</h1>
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/betaselectr/blob/HEAD/R/lav_betaselect.R" class="external-link"><code>R/lav_betaselect.R</code></a></small>
      <div class="d-none name"><code>lav_betaselect.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Can standardize selected
variables in a <code>lavaan</code> model without
refitting the models, can handle
product term correctly and skip
categorical predictors in
standardization.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">lav_betaselect</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  to_standardize <span class="op">=</span> <span class="st">".all."</span>,</span>
<span>  not_to_standardize <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  skip_categorical_x <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data.frame"</span>, <span class="st">"text"</span><span class="op">)</span>,</span>
<span>  std_se <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none"</span>, <span class="st">"delta"</span>, <span class="st">"bootstrap"</span><span class="op">)</span>,</span>
<span>  std_z <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  std_pvalue <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  std_ci <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  boot_out <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bootstrap <span class="op">=</span> <span class="fl">100L</span>,</span>
<span>  store_boot_est <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"no"</span>, <span class="st">"snow"</span>, <span class="st">"multicore"</span><span class="op">)</span>,</span>
<span>  ncpus <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span>logical <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>,</span>
<span>  cl <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  iseed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  delta_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lavaan"</span>, <span class="st">"numDeriv"</span><span class="op">)</span>,</span>
<span>  vector_form <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>The output of
<code>lavaan</code> model fit functions, such
as <code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code> and <code><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">lavaan::cfa()</a></code>.</p></dd>


<dt>to_standardize</dt>
<dd><p>A string vector,
which should be the names of the
variables to be standardized.
Default is <code>".all"</code>, indicating all
variables are to be standardized
(but see <code>skip_categorical</code>).</p></dd>


<dt>not_to_standardize</dt>
<dd><p>A string
vector, which should be the names
of the variables that should not be
standardized. This argument is useful
when most variables, except for a few,
are to be standardized. This argument
cannot be ued with <code>to_standardize</code>
at the same time. Default is <code>NULL</code>,
and only <code>to_standardize</code> is used.</p></dd>


<dt>skip_categorical_x</dt>
<dd><p>Logical.
If <code>TRUE</code>, the default, all
categorical predictors, defined as
variables with only two possible
values in the data analyzed, will
be skipped in standardization. This
overrides the argument
<code>to_standardize</code>. That is, a
categorical predictor will not be
standardized even if listed in
<code>to_standardize</code>, unless uses set
this argument to <code>FALSE</code>.</p></dd>


<dt>output</dt>
<dd><p>The format of the
output. If set to <code>"data.frame"</code>,
the output will be a data frame like
the one from <code><a href="https://rdrr.io/pkg/lavaan/man/parameterEstimates.html" class="external-link">lavaan::parameterEstimates()</a></code>.
If set to <code>"text"</code>, it will be printed
in a format similar to the one in
the <code>summary</code>-method of <code>lavaan</code>.
(NOTE: <code>"text"</code> supported but not
fully implemented.)</p></dd>


<dt>std_se</dt>
<dd><p>String. If set to <code>"none"</code>,
the default, standard errors will not
be computed for the standardized
solution. If set to <code>"delta"</code>,
delta method will be used to compute
the standard errors. If set to
<code>"bootstrap"</code>, then what it does
depends whether <code>boot_out</code> is set.
If <code>boot_out</code> is to an output of
<code><a href="https://sfcheung.github.io/manymome/reference/do_boot.html" class="external-link">manymome::do_boot()</a></code>, its content
will be used. If <code>boot_out</code> is
<code>NULL</code> <em>and</em> bootstrap
estimates are available in <code>object</code>
(e.g., bootstrapping is requested
when fitting the model in <code>lavaan</code>),
then the stored bootstrap estimates
will be sued. If not available,
the bootstrapping will be conducted
using <code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code>,
using arguments <code>bootstrap</code>,
<code>parallel</code>, <code>ncpus</code>, <code>cl</code>, and
<code>iseed</code>.`</p></dd>


<dt>std_z</dt>
<dd><p>Logical. If <code>TRUE</code> and
<code>std_se</code> is not set to <code>"none"</code>,
standard error will be computed
using the method specified in
<code>std_se</code>. Default is <code>TRUE</code>.</p></dd>


<dt>std_pvalue</dt>
<dd><p>Logical. If <code>TRUE</code>,
<code>std_se</code> is not set to <code>"none"</code>,
and <code>std_z</code> is <code>TRUE</code>, <em>p</em>-values
will be computed using the method
specified in <code>std_se</code>. For
bootstrapping, the method proposed by
Asparouhov and Muthén (2021) is used.
Default is <code>TRUE</code>.</p></dd>


<dt>std_ci</dt>
<dd><p>Logical. If <code>TRUE</code> and
<code>std_se</code> is not set to <code>"none"</code>,
confidence intervals will be
computed using the method specified in
<code>std_se</code>. Default is <code>FALSE.</code></p></dd>


<dt>level</dt>
<dd><p>The level of confidence
of the confidence intervals. Default
is .95. It will be used in the
confidence intervals of both
the unstandardized and
standardized solution.</p></dd>


<dt>progress</dt>
<dd><p>Logical. If <code>TRUE</code>,
progress bars will be displayed
for long process.</p></dd>


<dt>boot_out</dt>
<dd><p>If <code>std_se</code> is
<code>"bootstrap"</code> and this argument
is set to an output of
<code><a href="https://sfcheung.github.io/manymome/reference/do_boot.html" class="external-link">manymome::do_boot()</a></code>, its output
will be used in computing statistics
such as standard errors and
confidence intervals. This allows
users to use methods other than
bootstrapping when fitting the
model, while they can still request
bootstrapping for the standardized
solution.</p></dd>


<dt>bootstrap</dt>
<dd><p>If <code>std_se</code> is
<code>"bootstrap"</code> but bootstrapping is
not requested when fitting the model
and <code>boot_out</code> is not set,
<code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code> will be
called to do bootstrapping. This
argument is the number of bootstrap
samples to draw. Default is 100.
Should be set to 5000 or even 10000
for stable results.</p></dd>


<dt>store_boot_est</dt>
<dd><p>Logical. If
<code>std_se</code> is <code>"bootstrap"</code> and this
argument is <code>TRUE</code>, the default,
the bootstrap estimates of the
standardized solution will be stored
in the attribute <code>"boot_est"</code>. These
estimates can be used for
diagnosis of the bootstrapping. If
<code>FALSE</code>, then the bootstrap estimates
will not be stored.</p></dd>


<dt>parallel</dt>
<dd><p>If <code>std_se</code> is
<code>"bootstrap"</code> but bootstrapping is
not requested when fitting the model
and <code>boot_out</code> is not set,
<code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code> will be
called to do bootstrapping. This
argument is to be passed to
<code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code>. Default
is <code>"no"</code>.</p></dd>


<dt>ncpus</dt>
<dd><p>If <code>std_se</code> is
<code>"bootstrap"</code> but bootstrapping is
not requested when fitting the model
and <code>boot_out</code> is not set,
<code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code> will be
called to do bootstrapping. This
argument is to be passed to
<code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code>. Default
is <code>parallel::detectCores(logical = FALSE) - 1</code>.
Ignored if <code>parallel</code> is <code>"no"</code>.</p></dd>


<dt>cl</dt>
<dd><p>If <code>std_se</code> is
<code>"bootstrap"</code> but bootstrapping is
not requested when fitting the model
and <code>boot_out</code> is not set,
<code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code> will be
called to do bootstrapping. This
argument is to be passed to
<code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code>. Default
is <code>NULL</code>.
Ignored if <code>parallel</code> is <code>"no"</code>.</p></dd>


<dt>iseed</dt>
<dd><p>If <code>std_se</code> is
<code>"bootstrap"</code> but bootstrapping is
not requested when fitting the model
and <code>boot_out</code> is not set,
<code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code> will be
called to do bootstrapping. This
argument is to be passed to
<code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code> to set
the seed for the random resampling.
Default
is <code>NULL</code>. Should be set to an integer
for reproducible results.
Ignored if <code>parallel</code> is <code>"no"</code>.</p></dd>


<dt>...</dt>
<dd><p>Optional arguments to be
passed to the <code><a href="https://rdrr.io/pkg/lavaan/man/parameterEstimates.html" class="external-link">lavaan::parameterEstimates()</a></code>,
which will be use to generate the
output.</p></dd>


<dt>delta_method</dt>
<dd><p>The method used
to compute delta method standard
errors. For internal use and should
not be changed.</p></dd>


<dt>vector_form</dt>
<dd><p>The internal
method used to compute standardized
solution. For internal use and should
not be changed.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame storing the parameter
estimates, similar in form to the
output of <code><a href="https://rdrr.io/pkg/lavaan/man/parameterEstimates.html" class="external-link">lavaan::parameterEstimates()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function lets users
select which variables to be standardized
when computing the standardized
solution. It has the following
features:</p><ul><li><p>It automatically skips predictors
which has only two unique values,
assuming that they are dummy variables.</p></li>
<li><p>It does not standardize product
term, which is incorrect. Instead,
it compute the product term with
its component variables standardized.</p></li>
<li><p>It can be used to generate bootstrap
confidence intervals for the
standardized solution. Bootstrap
confidence interval is better than
doing standardization <em>before</em> fitting
a model because it correctly takes
into account the sampling variance
of the standard deviations. It is
also better than delta method
confidence interval because it takes
into account the usually asymmetric
distribution of parameters after
standardization.</p></li>
<li><p>For comparison, it can also report
delta method standard errors and
confidence intervals.</p></li>
</ul><div class="section">
<h3 id="problems-with-common-approaches">Problems With Common Approaches<a class="anchor" aria-label="anchor" href="#problems-with-common-approaches"></a></h3>


<p>In most SEM programs, users
have limited control on which
variables to standardize when
requesting the standardized solution.
The solution may be uninterpretable
or misleading in these conditions:</p><ul><li><p>Dummy variables are standardized
and can not be interpreted as the
difference between two groups on the
outcome variables.</p></li>
<li><p>Product terms (interaction terms)
are standardized and they cannot be
interpreted as the changes in the
effects of focal variables when the
moderators change (Cheung, Cheung,
Lau, Hui, &amp; Vong, 2022).</p></li>
<li><p>Variables with meaningful units can
be more difficult to interpret when
they are standardized (e.g., age).</p></li>
</ul><p>Moreover, the delta method is usually
used, which is suboptimal for
standardization unless the sample
size is large. For example, the
covariance with variables standardized
is a correlation, and its sampling
distribution is skewed unless its
population value is zero. However,
delta method confidence interval
for the correlation is necessarily
symmetric around the point estimate.</p>
</div>

<div class="section">
<h3 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a></h3>

<ul><li><p>It only supports observed variable
interaction terms, and only support
two-way interactions.</p></li>
<li><p>It does not support multilevel
models.</p></li>
<li><p>It only supports models fitted to
raw data.</p></li>
<li><p>Intercepts not supported.</p></li>
</ul></div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Asparouhov, A., &amp; Muthén, B. (2021). Bootstrap p-value computation.
Retrieved from https://www.statmodel.com/download/FAQ-Bootstrap%20-%20Pvalue.pdf</p>
<p>Cheung, S. F., Cheung, S.-H., Lau, E. Y. Y., Hui, C. H., &amp; Vong, W. N.
(2022) Improving an old way to measure moderation effect in standardized
units. <em>Health Psychology</em>, <em>41</em>(7), 502-505.
<a href="https://doi.org/10.1037/hea0001188" class="external-link">doi:10.1037/hea0001188</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="print.lav_betaselect.html">print.lav_betaselect()</a></code> for its print method.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448" class="external-link">https://orcid.org/0000-0002-9871-9448</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># TO ADD</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shu Fai Cheung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

