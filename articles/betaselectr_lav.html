<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Beta-Select Demonstration: SEM by 'lavaan' • betaselectr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Public_Sans-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Beta-Select Demonstration: SEM by 'lavaan'">
<meta name="google-site-verification" content="0VLBmFnW_UJFI-7gXnORPBsWxqZwmzuGpK-TeVRLBjQ">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">betaselectr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>&lt;Structural Equation Models&gt;</h6></li>
    <li><a class="dropdown-item" href="../articles/betaselectr_lav.html">Beta-Select Demonstration - SEM by 'lavaan'</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>&lt;Multiple Regression&gt;</h6></li>
    <li><a class="dropdown-item" href="../articles/betaselectr_lm.html">Beta-Select Demonstration - Regression by 'lm()'</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>&lt;Generalized Linear Models&gt;</h6></li>
    <li><a class="dropdown-item" href="../articles/betaselectr_glm.html">Beta-Select Demonstration - Logistic Regression by 'glm()'</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sfcheung/betaselectr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Beta-Select Demonstration: SEM by 'lavaan'</h1>
            
            <h4 data-toc-skip class="date">2024-10-31</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/betaselectr/blob/main/vignettes/betaselectr_lav.Rmd" class="external-link"><code>vignettes/betaselectr_lav.Rmd</code></a></small>
      <div class="d-none name"><code>betaselectr_lav.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This article demonstrates how to use <code><a href="../reference/lav_betaselect.html">lav_betaselect()</a></code>
from the package <a href="https://sfcheung.github.io/betaselectr/"><code>betaselectr</code></a>
to standardize selected variables in a model fitted by
<code>lavaan</code> and forming confidence intervals for the
parameters.</p>
</div>
<div class="section level2">
<h2 id="data-and-model">Data and Model<a class="anchor" aria-label="anchor" href="#data-and-model"></a>
</h2>
<p>The sample dataset from the package <code>betaselectr</code> will be
used in this demonstration:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sfcheung.github.io/betaselectr/">betaselectr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_test_medmod</span><span class="op">)</span></span>
<span><span class="co">#&gt;          dv       iv      mod      med     cov1     cov2</span></span>
<span><span class="co">#&gt; 1  7.487873 11.42573 16.65805 42.28988 54.14051 15.56069</span></span>
<span><span class="co">#&gt; 2  8.474931 16.64790 22.66332 42.08692 39.21125 17.61286</span></span>
<span><span class="co">#&gt; 3 11.206539 14.81278 22.80955 32.76869 31.97963 20.77333</span></span>
<span><span class="co">#&gt; 4 10.148827 15.79632 22.94451 43.96807 42.72187 15.66971</span></span>
<span><span class="co">#&gt; 5  7.421606 14.29621 24.51562 37.10942 42.74174 21.97132</span></span>
<span><span class="co">#&gt; 6  6.846435 12.00819 25.22163 35.46051 30.85914 22.35444</span></span></code></pre></div>
<p>This is the path model, fitted by <code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; This is lavaan 0.6-19</span></span>
<span><span class="co">#&gt; lavaan is FREE software! Please report any bugs.</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span></span>
<span><span class="st">"</span></span>
<span><span class="st">med ~ iv + mod + iv:mod + cov1 + cov2</span></span>
<span><span class="st">dv ~ med + iv + cov1 + cov2</span></span>
<span><span class="st">"</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">mod</span>,</span>
<span>           <span class="va">data_test_medmod</span><span class="op">)</span></span></code></pre></div>
<p>The model has a moderator, <code>mod</code>, posited to moderate the
effect from <code>iv</code> to <code>med</code>. The product term is
<code>iv:mod</code>.</p>
<p>These are the results:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt; lavaan 0.6-19 ended normally after 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Estimator                                         ML</span></span>
<span><span class="co">#&gt;   Optimization method                           NLMINB</span></span>
<span><span class="co">#&gt;   Number of model parameters                        11</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Number of observations                           200</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Test User Model:</span></span>
<span><span class="co">#&gt;                                                       </span></span>
<span><span class="co">#&gt;   Test statistic                                 2.303</span></span>
<span><span class="co">#&gt;   Degrees of freedom                                 2</span></span>
<span><span class="co">#&gt;   P-value (Chi-square)                           0.316</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Parameter Estimates:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Standard errors                             Standard</span></span>
<span><span class="co">#&gt;   Information                                 Expected</span></span>
<span><span class="co">#&gt;   Information saturated (h1) model          Structured</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Regressions:</span></span>
<span><span class="co">#&gt;                    Estimate   Std.Err  z-value  P(&gt;|z|)</span></span>
<span><span class="co">#&gt;   med ~                                                </span></span>
<span><span class="co">#&gt;     iv                -6.373    0.985   -6.473    0.000</span></span>
<span><span class="co">#&gt;     mod               -3.899    0.614   -6.346    0.000</span></span>
<span><span class="co">#&gt;     iv:mod             0.286    0.039    7.340    0.000</span></span>
<span><span class="co">#&gt;     cov1              -0.093    0.070   -1.327    0.185</span></span>
<span><span class="co">#&gt;     cov2               0.242    0.133    1.823    0.068</span></span>
<span><span class="co">#&gt;   dv ~                                                 </span></span>
<span><span class="co">#&gt;     med                0.092    0.011    8.098    0.000</span></span>
<span><span class="co">#&gt;     iv                 0.227    0.038    5.896    0.000</span></span>
<span><span class="co">#&gt;     cov1              -0.006    0.013   -0.454    0.650</span></span>
<span><span class="co">#&gt;     cov2               0.030    0.025    1.230    0.219</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Variances:</span></span>
<span><span class="co">#&gt;                    Estimate   Std.Err  z-value  P(&gt;|z|)</span></span>
<span><span class="co">#&gt;    .med               60.292    6.029   10.000    0.000</span></span>
<span><span class="co">#&gt;    .dv                 2.087    0.209   10.000    0.000</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="problems-with-standardization">Problems With Standardization<a class="anchor" aria-label="anchor" href="#problems-with-standardization"></a>
</h2>
<p>We can request the standardized solution using
<code><a href="https://rdrr.io/pkg/lavaan/man/standardizedSolution.html" class="external-link">lavaan::standardizedSolution()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/standardizedSolution.html" class="external-link">standardizedSolution</a></span><span class="op">(</span><span class="va">fit</span>,</span>
<span>                     output <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Regressions:</span></span>
<span><span class="co">#&gt;                     est.std  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper</span></span>
<span><span class="co">#&gt;   med ~                                                                 </span></span>
<span><span class="co">#&gt;     iv               -1.855    0.259   -7.158    0.000   -2.363   -1.347</span></span>
<span><span class="co">#&gt;     mod              -1.956    0.280   -6.988    0.000   -2.504   -1.407</span></span>
<span><span class="co">#&gt;     iv:mod            3.588    0.428    8.390    0.000    2.750    4.426</span></span>
<span><span class="co">#&gt;     cov1             -0.077    0.058   -1.332    0.183   -0.189    0.036</span></span>
<span><span class="co">#&gt;     cov2              0.105    0.057    1.836    0.066   -0.007    0.218</span></span>
<span><span class="co">#&gt;   dv ~                                                                  </span></span>
<span><span class="co">#&gt;     med               0.459    0.052    8.845    0.000    0.357    0.560</span></span>
<span><span class="co">#&gt;     iv                0.331    0.053    6.279    0.000    0.228    0.434</span></span>
<span><span class="co">#&gt;     cov1             -0.024    0.054   -0.454    0.650   -0.130    0.081</span></span>
<span><span class="co">#&gt;     cov2              0.066    0.054    1.233    0.218   -0.039    0.171</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Variances:</span></span>
<span><span class="co">#&gt;                     est.std  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper</span></span>
<span><span class="co">#&gt;    .med               0.656    0.050   13.243    0.000    0.559    0.753</span></span>
<span><span class="co">#&gt;    .dv                0.569    0.050   11.353    0.000    0.471    0.667</span></span></code></pre></div>
<p>However, for this model, there are several problems:</p>
<ul>
<li><p>The product term, <code>iv:mod</code>, is also standardized. This
is inappropriate. One simple but underused solution is standardized the
variables <em>before</em> forming the product term <span class="citation">(Friedrich, 1982)</span>.</p></li>
<li><p>The confidence intervals are formed using the delta-method, which
has been found to be inferior to methods such as nonparametric
percentile bootstrap confidence interval for the standardized solution
<span class="citation">(Falk, 2018)</span>. Although there are
situations in which the delta-method confidence and the nonparametric
percentile bootstrap confidences can be similar (e.g., sample size is
large and the sample estimates are not extreme), it is still safe to at
least try both methods and compare the results.</p></li>
<li><p>There are cases in which some variabLes are measured by
meaningful units and do not need to be standardized. for example, if
<code>cov1</code> is age measured by year, then age is more meaningful
than “standardized age”.</p></li>
<li><p>In path analysis, categorical variables are usually represented
by dummy variables, each of them having only two possible values (0 or
1). It is not meaningful to standardize the dummy variables.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="beta-select-lav_betaselect">Beta-Select <code>lav_betaselect()</code><a class="anchor" aria-label="anchor" href="#beta-select-lav_betaselect"></a>
</h2>
<p>The function <code><a href="../reference/lav_betaselect.html">lav_betaselect()</a></code> can be used to solve this
problem by:</p>
<ul>
<li><p>standardizing variables before product terms are formed,</p></li>
<li><p>standardizing only variables for which standardization can
facilitate interpretation, and</p></li>
<li><p>forming confidence intervals that take into account selected
standardization.</p></li>
</ul>
<p>We call the coefficients computed by this kind of standardization
<em>beta</em>s-select (<span class="math inline">\(\beta{s}_{Select}\)</span>, <span class="math inline">\(\beta_{Select}\)</span> in singular form), to
differentiate them from coefficients computed by standardizing all
variables, including product terms.</p>
<div class="section level3">
<h3 id="estimates-only">Estimates Only<a class="anchor" aria-label="anchor" href="#estimates-only"></a>
</h3>
<p>Suppose we only need to solve the first problem, with the product
term computed after <code>iv</code> and <code>mod</code> are
standardized:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit_beta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lav_betaselect.html">lav_betaselect</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit_beta</span></span></code></pre></div>
<p>This is the output if printed using the default options:</p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Selected Standardization:</span></span>
<span><span class="co">#&gt;                     </span></span>
<span><span class="co">#&gt;  Standard Error: Nil</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Parameter Estimates Settings:</span></span>
<span><span class="co">#&gt;                                              </span></span>
<span><span class="co">#&gt;  Standard errors:                  Standard  </span></span>
<span><span class="co">#&gt;  Information:                      Expected  </span></span>
<span><span class="co">#&gt;  Information saturated (h1) model: Structured</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Regressions:</span></span>
<span><span class="co">#&gt;            BetaSelect</span></span>
<span><span class="co">#&gt;  med ~               </span></span>
<span><span class="co">#&gt;   iv           -1.855</span></span>
<span><span class="co">#&gt;   mod          -1.956</span></span>
<span><span class="co">#&gt;   iv:mod        0.400</span></span>
<span><span class="co">#&gt;   cov1         -0.077</span></span>
<span><span class="co">#&gt;   cov2          0.105</span></span>
<span><span class="co">#&gt;  dv ~                </span></span>
<span><span class="co">#&gt;   med           0.459</span></span>
<span><span class="co">#&gt;   iv            0.331</span></span>
<span><span class="co">#&gt;   cov1         -0.024</span></span>
<span><span class="co">#&gt;   cov2          0.066</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Footnote:</span></span>
<span><span class="co">#&gt; - Variable(s) standardized: cov1, cov2, dv, iv, med, mod</span></span>
<span><span class="co">#&gt; - Call 'print()' and set 'standardized_only' to 'FALSE' to print both</span></span>
<span><span class="co">#&gt;   original estimates and betas-select.</span></span>
<span><span class="co">#&gt; - Product terms (iv:mod) have variables standardized before computing</span></span>
<span><span class="co">#&gt;   them. The product term(s) is/are not standardized.</span></span></code></pre>
<p>Compared to the solution with the product term standardized, the
coefficient of <code>iv:mod</code> changed substantially from 3.588 to
0.286. As shown by <span class="citation">Cheung et al. (2022)</span>,
the coefficient of <em>standardized</em> product term
(<code>iv:mod</code>) can be substantially different from the properly
standardized product term (the product of standardized <code>iv</code>
and standardized <code>mod</code>).</p>
<p>The footnote will also indicate variables that are standardized, and
remarked that product terms are formed <em>after</em>
standardization.</p>
</div>
<div class="section level3">
<h3 id="estimates-and-bootstrap-confidence-interval">Estimates and Bootstrap Confidence Interval<a class="anchor" aria-label="anchor" href="#estimates-and-bootstrap-confidence-interval"></a>
</h3>
<p>Suppose we want to address both the first and the second problems,
with</p>
<ul>
<li><p>the product term computed after <code>iv</code> and
<code>mod</code> standardized, and</p></li>
<li><p>bootstrap confidence intervals used, that take into account the
sampling variation of the standardizers (the standard
deviations).</p></li>
</ul>
<p>We can call <code><a href="../reference/lav_betaselect.html">lav_betaselect()</a></code> again, with additional
arguments set:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit_beta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lav_betaselect.html">lav_betaselect</a></span><span class="op">(</span><span class="va">fit</span>,</span>
<span>                           std_se <span class="op">=</span> <span class="st">"bootstrap"</span>,</span>
<span>                           bootstrap <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>                           iseed <span class="op">=</span> <span class="fl">2345</span>,</span>
<span>                           parallel <span class="op">=</span> <span class="st">"snow"</span>,</span>
<span>                           ncpus <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; Finding product terms in the model ...</span></span>
<span><span class="co">#&gt; Finished finding product terms.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Compute bootstrapping standardized solution:</span></span></code></pre></div>
<p>These are the additional arguments:</p>
<ul>
<li><p><code>std_se</code>: The method to compute the standard errors as
well as confidence intervals. Set to <code>"bootstrap"</code> for
nonparametric bootstrapping.</p></li>
<li><p><code>iseed</code>: The seed for the random number generator used
for bootstrapping. Set this to an integer to make the results
reproducible.</p></li>
<li><p><code>parallel</code>: The method to be used for parallel
processing. It will be passed to <code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code>.
Supported values are <code>"none"</code>, <code>"snow"</code>, and
<code>"multicore"</code>.</p></li>
<li><p><code>ncpus</code>: The number of CPU cores to use if
<code>parallel</code> processing is not <code>"none"</code>. Default is
<code>parallel::detectCores(logical = FALSE) - 1</code>, or the number
of <em>physical</em> cores minus one.</p></li>
</ul>
<p>This is the output if printed with default options:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit_beta</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Selected Standardization:</span></span>
<span><span class="co">#&gt;                                              </span></span>
<span><span class="co">#&gt;  Standard Error:      Nonparametric bootstrap</span></span>
<span><span class="co">#&gt;  Bootstrap samples:   5000                   </span></span>
<span><span class="co">#&gt;  Confidence Interval: Percentile             </span></span>
<span><span class="co">#&gt;  Level of Confidence: 95.0%                  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Parameter Estimates Settings:</span></span>
<span><span class="co">#&gt;                                              </span></span>
<span><span class="co">#&gt;  Standard errors:                  Standard  </span></span>
<span><span class="co">#&gt;  Information:                      Expected  </span></span>
<span><span class="co">#&gt;  Information saturated (h1) model: Structured</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Regressions:</span></span>
<span><span class="co">#&gt;            BetaSelect    SE      Z p-value Sig  CI.Lo  CI.Hi CI.Sig</span></span>
<span><span class="co">#&gt;  med ~                                                             </span></span>
<span><span class="co">#&gt;   iv           -1.855 0.248 -7.490   0.000 *** -2.307 -1.332   Sig.</span></span>
<span><span class="co">#&gt;   mod          -1.956 0.281 -6.950   0.000 *** -2.453 -1.348   Sig.</span></span>
<span><span class="co">#&gt;   iv:mod        0.400 0.047  8.565   0.000 ***  0.298  0.481   Sig.</span></span>
<span><span class="co">#&gt;   cov1         -0.077 0.057 -1.353   0.185     -0.186  0.038   n.s.</span></span>
<span><span class="co">#&gt;   cov2          0.105 0.061  1.725   0.094   . -0.019  0.219   n.s.</span></span>
<span><span class="co">#&gt;  dv ~                                                              </span></span>
<span><span class="co">#&gt;   med           0.459 0.052  8.828   0.000 ***  0.348  0.553   Sig.</span></span>
<span><span class="co">#&gt;   iv            0.331 0.051  6.480   0.000 ***  0.229  0.431   Sig.</span></span>
<span><span class="co">#&gt;   cov1         -0.024 0.058 -0.418   0.686     -0.137  0.090   n.s.</span></span>
<span><span class="co">#&gt;   cov2          0.066 0.058  1.139   0.259     -0.050  0.178   n.s.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Footnote:</span></span>
<span><span class="co">#&gt; - Variable(s) standardized: cov1, cov2, dv, iv, med, mod</span></span>
<span><span class="co">#&gt; - Sig codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; - Standard errors, p-values, and confidence intervals are not computed</span></span>
<span><span class="co">#&gt;   for betas-select which are fixed in the standardized solution.</span></span>
<span><span class="co">#&gt; - P-values for betas-select are asymmetric bootstrap p-value computed</span></span>
<span><span class="co">#&gt;   by the method of Asparouhov and Muthén (2021).</span></span>
<span><span class="co">#&gt; - Call 'print()' and set 'standardized_only' to 'FALSE' to print both</span></span>
<span><span class="co">#&gt;   original estimates and betas-select.</span></span>
<span><span class="co">#&gt; - Product terms (iv:mod) have variables standardized before computing</span></span>
<span><span class="co">#&gt;   them. The product term(s) is/are not standardized.</span></span></code></pre>
<p>In this dataset, with 200 cases, the delta-method confidence
intervals are close to the bootstrap confidence intervals, except
obviously for the product term because the coefficient of the product
term has substantially different values in the two solutions.</p>
</div>
<div class="section level3">
<h3 id="estimates-and-bootstrap-confidence-intervals-with-only-selected-variables-standardized">Estimates and Bootstrap Confidence Intervals, With Only Selected
Variables Standardized<a class="anchor" aria-label="anchor" href="#estimates-and-bootstrap-confidence-intervals-with-only-selected-variables-standardized"></a>
</h3>
<p>Suppose we want to address also the the third issue, and standardize
only some of the variables. This can be done using either
<code>to_standardize</code> or <code>not_to_standardize</code>.</p>
<ul>
<li><p>Use <code>to_standardize</code> when the number of variables to
standardize is much fewer than the number of variables not to
standardize.</p></li>
<li><p>Use <code>not_to_standardize</code> when the number variables to
standardize is much more than the the number of variables not to
standardize.</p></li>
</ul>
<p>For example, suppose we only need to standardize <code>dv</code> and
<code>iv</code>, <code>cov1</code>, and <code>cov2</code>, this is the
call to do this, setting <code>to_standardize</code> to
<code>c("iv", "dv", "cov1", "cov2")</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit_beta_select_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lav_betaselect.html">lav_betaselect</a></span><span class="op">(</span><span class="va">fit</span>,</span>
<span>                                    std_se <span class="op">=</span> <span class="st">"bootstrap"</span>,</span>
<span>                                    to_standardize <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"iv"</span>, <span class="st">"dv"</span>, <span class="st">"cov1"</span>, <span class="st">"cov2"</span><span class="op">)</span>,</span>
<span>                                    bootstrap <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>                                    iseed <span class="op">=</span> <span class="fl">2345</span>,</span>
<span>                                    parallel <span class="op">=</span> <span class="st">"snow"</span>,</span>
<span>                                    ncpus <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<p>If we want to standardize all variables except for <code>dv</code>
and <code>mod</code>, we can use this call, and set
<code>not_to_standardize</code> to <code>c("mod", "dv")</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit_beta_select_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lav_betaselect.html">lav_betaselect</a></span><span class="op">(</span><span class="va">fit</span>,</span>
<span>                                    std_se <span class="op">=</span> <span class="st">"bootstrap"</span>,</span>
<span>                                    not_to_standardize <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mod"</span>, <span class="st">"dv"</span><span class="op">)</span>,</span>
<span>                                    bootstrap <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>                                    iseed <span class="op">=</span> <span class="fl">2345</span>,</span>
<span>                                    parallel <span class="op">=</span> <span class="st">"snow"</span>,</span>
<span>                                    ncpus <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<p>The results of these calls are identical, and only those of the
second version are printed:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit_beta_select_2</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Selected Standardization:</span></span>
<span><span class="co">#&gt;                                              </span></span>
<span><span class="co">#&gt;  Standard Error:      Nonparametric bootstrap</span></span>
<span><span class="co">#&gt;  Bootstrap samples:   5000                   </span></span>
<span><span class="co">#&gt;  Confidence Interval: Percentile             </span></span>
<span><span class="co">#&gt;  Level of Confidence: 95.0%                  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Parameter Estimates Settings:</span></span>
<span><span class="co">#&gt;                                              </span></span>
<span><span class="co">#&gt;  Standard errors:                  Standard  </span></span>
<span><span class="co">#&gt;  Information:                      Expected  </span></span>
<span><span class="co">#&gt;  Information saturated (h1) model: Structured</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Regressions:</span></span>
<span><span class="co">#&gt;            BetaSelect    SE      Z p-value Sig  CI.Lo  CI.Hi CI.Sig</span></span>
<span><span class="co">#&gt;  med ~                                                             </span></span>
<span><span class="co">#&gt;   iv           -1.855 0.248 -7.490   0.000 *** -2.307 -1.332   Sig.</span></span>
<span><span class="co">#&gt;   mod          -0.407 0.059 -6.950   0.000 *** -0.510 -0.280   Sig.</span></span>
<span><span class="co">#&gt;   iv:mod        0.083 0.010  8.565   0.000 ***  0.062  0.100   Sig.</span></span>
<span><span class="co">#&gt;   cov1         -0.077 0.057 -1.353   0.185     -0.186  0.038   n.s.</span></span>
<span><span class="co">#&gt;   cov2          0.105 0.061  1.725   0.094   . -0.019  0.219   n.s.</span></span>
<span><span class="co">#&gt;  dv ~                                                              </span></span>
<span><span class="co">#&gt;   med           0.878 0.116  7.567   0.000 ***  0.635  1.092   Sig.</span></span>
<span><span class="co">#&gt;   iv            0.634 0.100  6.337   0.000 ***  0.430  0.826   Sig.</span></span>
<span><span class="co">#&gt;   cov1         -0.047 0.112 -0.418   0.686     -0.265  0.168   n.s.</span></span>
<span><span class="co">#&gt;   cov2          0.126 0.111  1.137   0.259     -0.093  0.345   n.s.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Footnote:</span></span>
<span><span class="co">#&gt; - Variable(s) standardized: cov1, cov2, iv, med</span></span>
<span><span class="co">#&gt; - Sig codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; - Standard errors, p-values, and confidence intervals are not computed</span></span>
<span><span class="co">#&gt;   for betas-select which are fixed in the standardized solution.</span></span>
<span><span class="co">#&gt; - P-values for betas-select are asymmetric bootstrap p-value computed</span></span>
<span><span class="co">#&gt;   by the method of Asparouhov and Muthén (2021).</span></span>
<span><span class="co">#&gt; - Call 'print()' and set 'standardized_only' to 'FALSE' to print both</span></span>
<span><span class="co">#&gt;   original estimates and betas-select.</span></span>
<span><span class="co">#&gt; - Product terms (iv:mod) have variables standardized before computing</span></span>
<span><span class="co">#&gt;   them. The product term(s) is/are not standardized.</span></span></code></pre>
<p>The footnotes show that, by specifying that <code>dv</code> and
<code>mod</code> are not standardized, all the other four variables are
standardized: <code>iv</code>, <code>med</code>, <code>cov1</code>, and
<code>cov2</code>. Therefore, in this case, it is more convenient to use
<code>not_to_standardize</code>.</p>
<p>When reporting <em>beta</em>s-<em>select</em>, researchers need to
state which variables are standardized and which are not. This can be
done in table notes, or in a column of the parameter estimate tables.
The output can of <code><a href="../reference/lav_betaselect.html">lav_betaselect()</a></code> can be printed with
<code>show_Bs.by</code> set to <code>TRUE</code> to demonstrate the
second approach:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fit_beta_select_2</span>,</span>
<span>      show_Bs.by <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Regressions:</span></span>
<span><span class="co">#&gt;            BetaSelect    SE      Z p-value Sig  CI.Lo  CI.Hi CI.Sig  Selected</span></span>
<span><span class="co">#&gt;  med ~                                                                       </span></span>
<span><span class="co">#&gt;   iv           -1.855 0.248 -7.490   0.000 *** -2.307 -1.332   Sig.    iv,med</span></span>
<span><span class="co">#&gt;   mod          -0.407 0.059 -6.950   0.000 *** -0.510 -0.280   Sig.       med</span></span>
<span><span class="co">#&gt;   iv:mod        0.083 0.010  8.565   0.000 ***  0.062  0.100   Sig.    iv,med</span></span>
<span><span class="co">#&gt;   cov1         -0.077 0.057 -1.353   0.185     -0.186  0.038   n.s.  cov1,med</span></span>
<span><span class="co">#&gt;   cov2          0.105 0.061  1.725   0.094   . -0.019  0.219   n.s.  cov2,med</span></span>
<span><span class="co">#&gt;  dv ~                                                                        </span></span>
<span><span class="co">#&gt;   med           0.878 0.116  7.567   0.000 ***  0.635  1.092   Sig.       med</span></span>
<span><span class="co">#&gt;   iv            0.634 0.100  6.337   0.000 ***  0.430  0.826   Sig.        iv</span></span>
<span><span class="co">#&gt;   cov1         -0.047 0.112 -0.418   0.686     -0.265  0.168   n.s.      cov1</span></span>
<span><span class="co">#&gt;   cov2          0.126 0.111  1.137   0.259     -0.093  0.345   n.s.      cov2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Footnote:</span></span>
<span><span class="co">#&gt; - Variable(s) standardized: cov1, cov2, iv, med</span></span>
<span><span class="co">#&gt; - Sig codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; - Standard errors, p-values, and confidence intervals are not computed</span></span>
<span><span class="co">#&gt;   for betas-select which are fixed in the standardized solution.</span></span>
<span><span class="co">#&gt; - P-values for betas-select are asymmetric bootstrap p-value computed</span></span>
<span><span class="co">#&gt;   by the method of Asparouhov and Muthén (2021).</span></span>
<span><span class="co">#&gt; - Call 'print()' and set 'standardized_only' to 'FALSE' to print both</span></span>
<span><span class="co">#&gt;   original estimates and betas-select.</span></span>
<span><span class="co">#&gt; - The column 'Selected' lists variable(s) standardized when computing</span></span>
<span><span class="co">#&gt;   the standardized coefficient of a parameter. ('NA' for user-defined</span></span>
<span><span class="co">#&gt;   parameters because they are computed from other standardized</span></span>
<span><span class="co">#&gt;   parameters.)</span></span>
<span><span class="co">#&gt; - Product terms (iv:mod) have variables standardized before computing</span></span>
<span><span class="co">#&gt;   them. The product term(s) is/are not standardized.</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="categorical-variables">Categorical Variables<a class="anchor" aria-label="anchor" href="#categorical-variables"></a>
</h3>
<p>When calling <code><a href="../reference/lav_betaselect.html">lav_betaselect()</a></code>, variables with only two
values in the dataset are assumed to be categorical and will not be
standardized by default. This can be overriden by setting
<code>skip_categorical_x</code> to <code>FALSE</code>, though not
recommended.</p>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>In structural equation modeling, there are situations in which
standardizing all variables is not appropriate, or when standardization
needs to be done before forming product terms. We are not aware of tools
that can do appropriate standardization <em>and</em> form confidence
intervals that takes into account the selective standardization. By
promoting the use of <em>beta</em>s-<em>select</em> using
<code><a href="../reference/lav_betaselect.html">lav_betaselect()</a></code>, we hope to make it easier for researchers
to do appropriate Standardization in when reporting SEM results.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0" line-spacing="2">
<div id="ref-cheung_improving_2022" class="csl-entry">
Cheung, S. F., Cheung, S.-H., Lau, E. Y. Y., Hui, C. H., &amp; Vong, W.
N. (2022). Improving an old way to measure moderation effect in
standardized units. <em>Health Psychology</em>, <em>41</em>(7), 502–505.
<a href="https://doi.org/10.1037/hea0001188" class="external-link">https://doi.org/10.1037/hea0001188</a>
</div>
<div id="ref-falk_are_2018" class="csl-entry">
Falk, C. F. (2018). Are robust standard errors the best approach for
interval estimation with nonnormal data in structural equation modeling?
<em>Structural Equation Modeling: A Multidisciplinary Journal</em>,
<em>25</em>(2), 244–266. <a href="https://doi.org/10.1080/10705511.2017.1367254" class="external-link">https://doi.org/10.1080/10705511.2017.1367254</a>
</div>
<div id="ref-friedrich_defense_1982" class="csl-entry">
Friedrich, R. J. (1982). In defense of multiplicative terms in multiple
regression equations. <em>American Journal of Political Science</em>,
<em>26</em>(4), 797–833. <a href="https://doi.org/10.2307/2110973" class="external-link">https://doi.org/10.2307/2110973</a>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shu Fai Cheung, Rong Wei Sun, Florbela Chang, Wendie Yang, Sing-Hang Cheung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
